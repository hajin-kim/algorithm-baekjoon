# 1572번 "중앙값" 풀이 및 후기

| 바로가기  | <https://www.acmicpc.net/problem/1572> |
|-------|----------------------------------------|
| 레이팅   | p5                                     |
| 푼 날짜  | 2023-08-31                             |
| 걸린 시간 | 1h                                     |

## 후기

종만북에서 비슷한 문제를 봤던 것 같아서 그거 기반으로 45분 동안 삽질하다가...
결국 아예 다른 풀이로 풀었습니다.
실제 푸는 데는 15분 소요했네요.

## 풀이

카운팅 소트 느낌의 세그먼트 트리 + 약간의 슬라이딩 윈도우입니다.

[2243](../2243) p5에서 쓴 세그먼트 트리를 그대로 쓰면 됩니다.
즉 아래 두 메소드가 필요합니다.
이때 세그먼트 트리의 인덱스는 수열 원소의 값을, 세그 트리의 값은 해당 값의 개수를 의미합니다.

- 인덱스 찾기: x번째 원소를 찾기입니다. x번째는 아니어도 중앙값을 찾을 수 있어야 합니다.
- 업데이트: 기본 연산입니다.

수열 원소의 값이 0..65536이므로 크기를 65536으로 고정시키면 됩니다.

각 원소 a에 대해 다음을 반복합니다.

1. 윈도우 역할을 할 큐에 넣습니다.
2. 세그 트리에 인덱스 a를 +1 업데이트합니다.
3. 윈도우 큐 크기가 k이면,
   1. 세그 트리에서 중앙값을 찾아 결과에 더합니다.
   2. 윈도우 큐 맨 앞 원소를 꺼냅니다.
   3. 세그 트리에 큐에서 꺼낸 값을 인덱스로 -1 업데이트합니다.

쓰고보니 큐는 필요 없었을 것 같네요.

O(N log K).
2243과 레이팅은 같지만 더 어려운 듯하네요.
