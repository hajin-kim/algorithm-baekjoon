# 2243번 "사탕상자" 풀이 및 후기

| 바로가기  | <https://www.acmicpc.net/problem/2243> |
|-------|----------------------------------------|
| 레이팅   | p5                                     |
| 푼 날짜  | 2023-08-31                             |
| 걸린 시간 | 25m                                    |

## 후기

잠 깨니까 새벽 5시인데 문제 안 푼 거 생각나서 화들짝했네요.

## 풀이

Segment tree입니다.

인덱스는 사탕의 맛, 값은 해당 맛 사탕의 개수로 간주합니다.
세그먼트 트리를 인덱스 구간 [0..1,000,000]이 커버되게 만들어둡니다.
인덱스 0은 범위 밖이지만 굳이 처리하기 귀찮고 문제에 영향이 없어서 걍 포함시켰습니다.

2번 행동은 특정 인덱스의 사탕을 가산하는 것입니다.
기본적인 세그트리의 업데이트 메소드입니다.

1번 행동은 (1) 앞에서부터 세서 n번째 사탕의 인덱스를 찾아서 (2) --하는 것 이렇게 둘로 쪼갤 수 있다.

1. 인덱스 찾기: 루트부터 시작합니다.
   현재 노드의 값은 자식 노드들의 사탕 개수 합계를 의미합니다.
   왼쪽 자식의 값이 n보다 작으면, n번째 사탕은 오른쪽 자식 구간에 있을 것입니다. 따라서 n에서 왼쪽 자식 값을 빼고 오른쪽 자식으로 이동합니다.
   그렇지 않으면, n번째 사탕이 왼쪽 자식 구간에 있을 것이므로 왼쪽 자식으로 이동합니다.
   이렇게 리프까지 반복하면 그 리프가 n번째 사탕의 인덱스가 됩니다.
2. -1 가산하기(1 감산하기): 위의 업데이트 메소드로 찾은 인덱스에 -1을 가산해 개수를 줄입니다.

최종 O(N log N) 입니다.
